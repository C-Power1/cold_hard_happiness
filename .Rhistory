library(tidyverse)
read_csv("bi-interview-exercise-icecream.csv")
icecream_data <- read_csv("bi-interview-exercise-icecream.csv")
icecream_data
icecream_data <- read_csv("bi-interview-exercise-icecream.csv")
icecream_data
icecream_data
icecream_data %>%
distinct(search_term)
icecream_data
icecream_data %>%
distinct(brand)
icecream_data %>%
distinct(search_term)
icecream_data
icecream_data %>%
distinct(date)
icecream_data %>%
distinct(brand)
icecream_data %>%
distinct(search_term)
icecream_data %>%
distinct(retailer)
icecream_data %>%
distinct(brand) %>%
sort()
icecream_data %>%
distinct(search_term)
icecream_data %>%
distinct(retailer)
icecream_data %>%
distinct(brand) %>%
sort(decreasing = T)
icecream_data %>%
distinct(search_term)
icecream_data %>%
distinct(retailer)
icecream_data %>%
distinct(brand) %>%
sort()
icecream_data %>%
distinct(brand)
icecream_data %>%
distinct(brand)
brands <- icecream_data %>%
distinct(brand) %>%
drop_na()
brands
icecream_data %>%
mutate(brand = ifelse(test = is.na(brand) == T, yes = thing , no = brand))
icecream_data %>%
mutate(brand = ifelse(test = is.na(brand) == T, yes = "thing" , no = brand))
brands_list <- icecream_data %>%
distinct(brand) %>%
drop_na()
icecream_data %>%
mutate(brand = ifelse(test = is.na(brand) == T & product_name %in% brands_list, yes = "thing" , no = brand))
icecream_data %>%
distinct(search_term)
icecream_data %>%
distinct(retailer)
brands_list <- icecream_data %>%
distinct(brand) %>%
drop_na()
brands_list
icecream_data %>%
distinct(product_name)
icecream_data %>%
distinct(search_term)
icecream_data %>%
distinct(retailer)
brands_list <- icecream_data %>%
distinct(brand) %>%
drop_na()
icecream_data %>%
group_by(product_name) %>%
summarise(n())
icecream_data %>%
group_by(product_name) %>%
summarise(n())
icecream_data %>%
distinct(search_term)
icecream_data %>%
distinct(retailer)
brands_list <- icecream_data %>%
distinct(brand) %>%
drop_na()
icecream_data %>%
group_by(product_name) %>%
summarise(n()) %>%
sort(decreasing = T)
icecream_data %>%
group_by(product_name) %>%
summarise(n()) %>%
sort(decreasing = T)
icecream_data %>%
group_by(product_name) %>%
count(sort = T)
icecream_data %>%
group_by(product_name) %>%
count(sort = T) %>%
tail(10)
icecream_data %>%
na.omit(product_name)
icecream_data
icecream_data %>%
any(is.na(product_name))
icecream_data
icecream_data %>%
any(is.na(product_name))
any(is.na(icecream_data$product_name))
brands_list <- icecream_data %>%
distinct(brand) %>%
drop_na() %>%
list()
brands_list
icecream_data %>%
mutate(brand = ifelse(test = is.na(brand) == T & str_detect(product_name, pattern = brands_list) %in% brands_list, yes = "thing" , no = brand))
brands_list <- icecream_data %>%
distinct(brand) %>%
drop_na()
brands_list
icecream_data %>%
mutate(brand = ifelse(test = is.na(brand) == T & str_detect(product_name, pattern = brands_list) %in% brands_list, yes = "thing" , no = brand))
brands_list <- icecream_data %>%
distinct(brand) %>%
drop_na() %>%
vector()
brands_list <- icecream_data %>%
distinct(brand) %>%
drop_na() %>%
as.vector()
brands_list
icecream_data %>%
separate_rows(brand)
icecream_data %>%
separate_rows(product_name) %>%
summarise(unmatched = any(!product_name %in% brands_list))
icecream_data %>%
mutate(brand = ifelse(test = is.na(brand) == T & any(product_name %in% brands_list), yes = "thing" , no = brand))
icecream_data %>%
mutate(brand = ifelse(test = is.na(brand) == T & any(!product_name %in% brands_list), yes = "thing" , no = brand))
icecream_data %>%
mutate(brand = ifelse(test = is.na(brand) == T & any(!product_name %in% brands_list),
yes = product_name,
no = brand))
icecream_data
icecream_data %>%
mutate(brand = ifelse(test = is.na(brand) == T & any(!product_name %in% brands_list),
yes = product_name,
no = brand))
find(any(!product_name %in% brands_list))
find(any(!icecream_data, product_name %in% brands_list))
find(any(!icecream_data$product_name %in% brands_list)))
find(any(!icecream_data$product_name %in% brands_list))
any(!icecream_data$product_name %in% brands_list))
any(!icecream_data$product_name %in% brands_list)
fix_brand_column <- icecream_data %>%
mutate(brand = ifelse(test = is.na(brand) == T & any(!product_name %in% brands_list),
yes = product_name,
no = brand))
fix_brand_column
brands_list <- icecream_data %>%
distinct(brand) %>%
drop_na()
library(tidyverse)
icecream_data <- read_csv("bi-interview-exercise-icecream.csv")
brands_list <- icecream_data %>%
distinct(brand) %>%
drop_na()
fix_brand_column <- icecream_data %>%
mutate(brand = ifelse(test = is.na(brand) == T & any(!product_name %in% brands_list),
yes = any(!product_name %in% brands_list),
no = brand))
fix_brand_column
brands_list <- icecream_data %>%
distinct(brand) %>%
drop_na()
fix_brand_column <- icecream_data %>%
mutate(brand = ifelse(test = is.na(brand) == T & any(!product_name %in% brands_list),
yes = product_name %in% brands_list,
no = brand))
fix_brand_column
brands_list <- icecream_data %>%
distinct(brand) %>%
drop_na()
fix_brand_column <- icecream_data %>%
mutate(brand = ifelse(test = is.na(brand) == T & any(!product_name %in% brands_list),
yes = product_name,
no = brand))
!product_name %in% brands_list
icecream_data %>%
!product_name %in% brands_list
icecream_data
library(tidyverse)
library(qdap)
library(dplyr)
library(magrittr)
icecream_data <- read_csv("bi-interview-exercise-icecream.csv")
icecream_data %>%
distinct(brand)
brands_list <- icecream_data %>%
dplyr::distinct(brand) %>%
drop_na() %>%
as.character()
fix_brand_column <- icecream_data %>%
mutate(brand = ifelse(test = is.na(brand) == T & !product_name %in% brands_list == T,
yes = product_name,
no = brand))
brands_list
icecream_data %>%
dplyr::distinct(brand) %>%
drop_na()
brands_list <- icecream_data %>%
dplyr::distinct(brand) %>%
drop_na() %>%
as.character()
fix_brand_column$brand <- mgsub(fix_brand_column$brand, pattern = brands_list, replacement = brands_list)
fix_brand_column$brand
brands_list
brands_list <- c("Ben & Jerry's", "YooMoo", "Carte D'Or", "Wall's", "Magnum", "Kelly's of Cornwall Cornish Parlour", "ASDA", "Nuii", "Nestle", "Twister", "Calippo", "Solero", "Halotop", "Mini Milk", "Haagen-Dazs", "Kinder Ice Cream", "Mars", "Snickers", "Oreo", "Cadbury", "Cornetto", "Del Monte", "Vimto", "R Whites", "Feast", "Mackie's of Scotland", "Franks", "Swedish Glace", "Jude’s", "Oppo", "Remeo", "Booja Booja", "Morrisons", "Other", "Little Moons", "Iceland", "Daim", "Mr Freeze", "Green & Black's", "Alpro", "The Coconut Collaborative", "Sainsbury's", "Skittles", "Tesco", "Pip Organic", "Jubbly", "Claudi & Fin", "Waitrose", "Lotus", "Yeo Valley", "Norfolk County", "Fravocado", "Grom", "Skinny Cow", "Whole Creations", "Franks Ice Cream", "Yorica", "Ice Cream Union", "Guuud")
pattern <- c("Ben & Jerry's", "YooMoo", "Carte D'Or", "Wall's", "Magnum", "Kelly's of Cornwall Cornish Parlour", "ASDA", "Nuii", "Nestle", "Twister", "Calippo", "Solero", "Halotop", "Mini Milk", "Haagen-Dazs", "Kinder Ice Cream", "Mars", "Snickers", "Oreo", "Cadbury", "Cornetto", "Del Monte", "Vimto", "R Whites", "Feast", "Mackie's of Scotland", "Franks", "Swedish Glace", "Jude’s", "Oppo", "Remeo", "Booja Booja", "Morrisons", "Other", "Little Moons", "Iceland", "Daim", "Mr Freeze", "Green & Black's", "Alpro", "The Coconut Collaborative", "Sainsbury's", "Skittles", "Tesco", "Pip Organic", "Jubbly", "Claudi & Fin", "Waitrose", "Lotus", "Yeo Valley", "Norfolk County", "Fravocado", "Grom", "Skinny Cow", "Whole Creations", "Franks Ice Cream", "Yorica", "Ice Cream Union", "Guuud")
fix_brand_column <- icecream_data %>%
mutate(brand = ifelse(test = is.na(brand) == T & !product_name %in% brands_list == T,
yes = product_name,
no = brand))
x <- fix_brand_column$brand
icecream_data %>%
distinct(brand)
replacement <- c("Ben & Jerry's", "YooMoo", "Carte D'Or", "Wall's", "Magnum", "Kelly's of Cornwall Cornish Parlour", "ASDA", "Nuii", "Nestle", "Twister", "Calippo", "Solero", "Halotop", "Mini Milk", "Haagen-Dazs", "Kinder Ice Cream", "Mars", "Snickers", "Oreo", "Cadbury", "Cornetto", "Del Monte", "Vimto", "R Whites", "Feast", "Mackie's of Scotland", "Franks", "Swedish Glace", "Jude’s", "Oppo", "Remeo", "Booja Booja", "Morrisons", "Other", "Little Moons", "Iceland", "Daim", "Mr Freeze", "Green & Black's", "Alpro", "The Coconut Collaborative", "Sainsbury's", "Skittles", "Tesco", "Pip Organic", "Jubbly", "Claudi & Fin", "Waitrose", "Lotus", "Yeo Valley", "Norfolk County", "Fravocado", "Grom", "Skinny Cow", "Whole Creations", "Franks Ice Cream", "Yorica", "Ice Cream Union", "Guuud")
pattern <- c("Ben & Jerry's", "YooMoo", "Carte D'Or", "Wall's", "Magnum", "Kelly's of Cornwall Cornish Parlour", "ASDA", "Nuii", "Nestle", "Twister", "Calippo", "Solero", "Halotop", "Mini Milk", "Haagen-Dazs", "Kinder Ice Cream", "Mars", "Snickers", "Oreo", "Cadbury", "Cornetto", "Del Monte", "Vimto", "R Whites", "Feast", "Mackie's of Scotland", "Franks", "Swedish Glace", "Jude’s", "Oppo", "Remeo", "Booja Booja", "Morrisons", "Other", "Little Moons", "Iceland", "Daim", "Mr Freeze", "Green & Black's", "Alpro", "The Coconut Collaborative", "Sainsbury's", "Skittles", "Tesco", "Pip Organic", "Jubbly", "Claudi & Fin", "Waitrose", "Lotus", "Yeo Valley", "Norfolk County", "Fravocado", "Grom", "Skinny Cow", "Whole Creations", "Franks Ice Cream", "Yorica", "Ice Cream Union", "Guuud")
x <- fix_brand_column$brand
fix_brand_column$brand <- mgsub(x, pattern, replacement)
fix_brand_column$brand <- mgsub(pattern, replacement)
fix_brand_column$brand <- mgsub(x, pattern, replacement)
fix_brand_column$brand <- mgsub(fix_brand_column$brand , pattern, replacement)
fix_brand_column$brand <- multigsub(fix_brand_column$brand , pattern, replacement)
install.packages("kutils")
library(tidyverse)
library(qdap)
library(dplyr)
library(magrittr)
library(kutils)
fix_brand_column$brand <- kutils::mgsub(fix_brand_column$brand , pattern, replacement)
replacement
pattern
fix_brand_column$brand <- kutils::mgsub(fix_brand_column$brand , pattern = pattern, replacement = replacement)
fix_brand_column$brand
fix_brand_column$brand <- mgsub(fix_brand_column$brand , pattern = pattern, replacement = replacement)
fix_brand_column
fix_brand_column <- icecream_data %>%
mutate(brand = ifelse(test = is.na(brand) == T & !product_name %in% brands_list == T,
yes = product_name,
no = brand))
x <- fix_brand_column$brand
# Unique brands in dataset
icecream_data %>%
distinct(brand)
pattern <- c("Ben & Jerry's", "YooMoo", "Carte D'Or", "Wall's", "Magnum", "Kelly's of Cornwall Cornish Parlour", "ASDA", "Nuii", "Nestle", "Twister", "Calippo", "Solero", "Halotop", "Mini Milk", "Haagen-Dazs", "Kinder Ice Cream", "Mars", "Snickers", "Oreo", "Cadbury", "Cornetto", "Del Monte", "Vimto", "R Whites", "Feast", "Mackie's of Scotland", "Franks", "Swedish Glace", "Jude’s", "Oppo", "Remeo", "Booja Booja", "Morrisons", "Other", "Little Moons", "Iceland", "Daim", "Mr Freeze", "Green & Black's", "Alpro", "The Coconut Collaborative", "Sainsbury's", "Skittles", "Tesco", "Pip Organic", "Jubbly", "Claudi & Fin", "Waitrose", "Lotus", "Yeo Valley", "Norfolk County", "Fravocado", "Grom", "Skinny Cow", "Whole Creations", "Franks Ice Cream", "Yorica", "Ice Cream Union", "Guuud")
replacement <- c("Ben & Jerry's", "YooMoo", "Carte D'Or", "Wall's", "Magnum", "Kelly's of Cornwall Cornish Parlour", "ASDA", "Nuii", "Nestle", "Twister", "Calippo", "Solero", "Halotop", "Mini Milk", "Haagen-Dazs", "Kinder Ice Cream", "Mars", "Snickers", "Oreo", "Cadbury", "Cornetto", "Del Monte", "Vimto", "R Whites", "Feast", "Mackie's of Scotland", "Franks", "Swedish Glace", "Jude’s", "Oppo", "Remeo", "Booja Booja", "Morrisons", "Other", "Little Moons", "Iceland", "Daim", "Mr Freeze", "Green & Black's", "Alpro", "The Coconut Collaborative", "Sainsbury's", "Skittles", "Tesco", "Pip Organic", "Jubbly", "Claudi & Fin", "Waitrose", "Lotus", "Yeo Valley", "Norfolk County", "Fravocado", "Grom", "Skinny Cow", "Whole Creations", "Franks Ice Cream", "Yorica", "Ice Cream Union", "Guuud")
fix_brand_column$brand <- qdap::multigsub(fix_brand_column$brand , pattern = pattern, replacement = replacement)
fix_brand_column$brand
fix_brand_column <- icecream_data %>%
mutate(brand = ifelse(test = is.na(brand) == T & !product_name %in% brands_list == T,
yes = qdap::multigsub(brand , pattern = pattern, replacement = replacement),
no = brand))
fix_brand_column
fix_brand_column <- icecream_data %>%
mutate(brand = ifelse(test = is.na(brand) == T,
yes = qdap::multigsub(brand, pattern = pattern, replacement = replacement),
no = brand))
fix_brand_column
library(tidyverse)
library(qdap)
library(dplyr)
library(magrittr)
library(kutils)
library(stringi)
library(tidyverse)
library(qdap)
library(dplyr)
library(magrittr)
library(kutils)
library(stringi)
fix_brand_column$brand <- stringi::stri_replace_all_fixed(str = fix_brand_column$brand, pattern = pattern, replacement = replacement)
fix_brand_column$brand
fix_brand_column$brand <- stringi::stri_replace_all_fixed(str = fix_brand_column$brand, pattern = "Ben & Jerry's", replacement = "Ben & Jerry's")
fix_brand_column$brand
fix_brand_column$brand <- stringi::stri_replace_all_fixed(str = fix_brand_column$brand, pattern = "Ben & Jerry's*", replacement = "Ben & Jerry's")
fix_brand_column$brand
fix_brand_column$brand <- stringi::mgsub(fix_brand_column$brand, pattern = "Ben & Jerry's*", replacement = "Ben & Jerry's")
fix_brand_column$brand <- mgsub(fix_brand_column$brand, pattern = "Ben & Jerry's*", replacement = "Ben & Jerry's")
fix_brand_column$brand
fix_brand_column$brand <- stringr::str_replace_all(fix_brand_column$brand, pattern = "Ben & Jerry's*", replacement = "Ben & Jerry's")
fix_brand_column$brand
x <- c("Tom", "Jerry", "Elmer", "Bugs")
pattern <- c("Tom", "Bugs")
replacement <- c("Thomas", "Bugs Bunny")
(y <- mgsub(pattern, replacement, x)
